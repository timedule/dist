(function(t){function e(e){for(var r,i,o=e[0],l=e[1],u=e[2],d=0,m=[];d<o.length;d++)i=o[d],Object.prototype.hasOwnProperty.call(s,i)&&s[i]&&m.push(s[i][0]),s[i]=0;for(r in l)Object.prototype.hasOwnProperty.call(l,r)&&(t[r]=l[r]);c&&c(e);while(m.length)m.shift()();return n.push.apply(n,u||[]),a()}function a(){for(var t,e=0;e<n.length;e++){for(var a=n[e],r=!0,o=1;o<a.length;o++){var l=a[o];0!==s[l]&&(r=!1)}r&&(n.splice(e--,1),t=i(i.s=a[0]))}return t}var r={},s={app:0},n=[];function i(e){if(r[e])return r[e].exports;var a=r[e]={i:e,l:!1,exports:{}};return t[e].call(a.exports,a,a.exports,i),a.l=!0,a.exports}i.m=t,i.c=r,i.d=function(t,e,a){i.o(t,e)||Object.defineProperty(t,e,{enumerable:!0,get:a})},i.r=function(t){"undefined"!==typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(t,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(t,"__esModule",{value:!0})},i.t=function(t,e){if(1&e&&(t=i(t)),8&e)return t;if(4&e&&"object"===typeof t&&t&&t.__esModule)return t;var a=Object.create(null);if(i.r(a),Object.defineProperty(a,"default",{enumerable:!0,value:t}),2&e&&"string"!=typeof t)for(var r in t)i.d(a,r,function(e){return t[e]}.bind(null,r));return a},i.n=function(t){var e=t&&t.__esModule?function(){return t["default"]}:function(){return t};return i.d(e,"a",e),e},i.o=function(t,e){return Object.prototype.hasOwnProperty.call(t,e)},i.p="/";var o=window["webpackJsonp"]=window["webpackJsonp"]||[],l=o.push.bind(o);o.push=e,o=o.slice();for(var u=0;u<o.length;u++)e(o[u]);var c=l;n.push([0,"chunk-vendors"]),a()})({0:function(t,e,a){t.exports=a("56d7")},"039a":function(t,e,a){"use strict";a("7174")},"07a6":function(t,e,a){t.exports=a.p+"img/login.ad59377f.png"},1439:function(t,e,a){},"2dad":function(t,e,a){},"56d7":function(t,e,a){"use strict";a.r(e);a("e260"),a("e6cf"),a("cca6"),a("a79d");var r=a("2b0e"),s=function(){var t=this,e=t.$createElement,r=t._self._c||e;return r("div",[r("b-navbar",{attrs:{type:"dark",variant:"dark"}},[r("div",{staticClass:"row w-100"},[r("b-navbar-brand",{staticClass:"col my-auto mx-3",attrs:{href:"/"}},[r("img",{staticClass:"d-inline-block align-top",attrs:{src:a("cf05"),alt:"Logo",height:"30px"}}),t._v(" Timedule ")]),r("div",{staticClass:"col-auto my-auto px-0"},[r("router-link",{staticClass:"link-light",attrs:{to:"/login"}},[null===t.user?r("b-icon-person",{staticClass:"h1 my-auto"}):r("div",{staticClass:"my-auto"},[r("b-icon-person-circle"),t._v(" "+t._s(t.user.uid)+" ")],1)],1)],1)],1)]),r("router-view")],1)},n=[],i=a("2591"),o={name:"App",components:{},mounted:function(){var t=this;i["a"].auth().onAuthStateChanged((function(e){t.user=e}));var e=this.$route;this.createTitleDesc(e)},data:function(){return{user:null,drawer:!1}},methods:{createTitleDesc:function(t){if(t.meta.title){var e=t.meta.title;document.title=e}else document.title="title is not set";if(t.meta.desc){var a=t.meta.desc+" | MIYACHIN VUE";document.querySelector("meta[name='description']").setAttribute("content",a)}else document.querySelector("meta[name='description']").setAttribute("content","description is not set")}},watch:{$route:function(t,e){var a=this;i["a"].auth().onAuthStateChanged((function(t){a.user=t})),this.createTitleDesc(t)}}},l=o,u=a("2877"),c=Object(u["a"])(l,s,n,!1,null,null,null),d=c.exports,m=a("8c4f"),p=function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("div",{staticClass:"hello"},[a("h1",[t._v(t._s(t.msg))]),t._m(0),a("h3",[t._v("Installed CLI Plugins")]),t._m(1),a("h3",[t._v("Essential Links")]),t._m(2),a("h3",[t._v("Ecosystem")]),t._m(3)])},v=[function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("p",[t._v(" For a guide and recipes on how to configure / customize this project,"),a("br"),t._v(" check out the "),a("a",{attrs:{href:"https://cli.vuejs.org",target:"_blank",rel:"noopener"}},[t._v("vue-cli documentation")]),t._v(". ")])},function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("ul",[a("li",[a("a",{attrs:{href:"https://github.com/vuejs/vue-cli/tree/dev/packages/%40vue/cli-plugin-babel",target:"_blank",rel:"noopener"}},[t._v("babel")])]),a("li",[a("a",{attrs:{href:"https://github.com/vuejs/vue-cli/tree/dev/packages/%40vue/cli-plugin-eslint",target:"_blank",rel:"noopener"}},[t._v("eslint")])])])},function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("ul",[a("li",[a("a",{attrs:{href:"https://vuejs.org",target:"_blank",rel:"noopener"}},[t._v("Core Docs")])]),a("li",[a("a",{attrs:{href:"https://forum.vuejs.org",target:"_blank",rel:"noopener"}},[t._v("Forum")])]),a("li",[a("a",{attrs:{href:"https://chat.vuejs.org",target:"_blank",rel:"noopener"}},[t._v("Community Chat")])]),a("li",[a("a",{attrs:{href:"https://twitter.com/vuejs",target:"_blank",rel:"noopener"}},[t._v("Twitter")])]),a("li",[a("a",{attrs:{href:"https://news.vuejs.org",target:"_blank",rel:"noopener"}},[t._v("News")])])])},function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("ul",[a("li",[a("a",{attrs:{href:"https://router.vuejs.org",target:"_blank",rel:"noopener"}},[t._v("vue-router")])]),a("li",[a("a",{attrs:{href:"https://vuex.vuejs.org",target:"_blank",rel:"noopener"}},[t._v("vuex")])]),a("li",[a("a",{attrs:{href:"https://github.com/vuejs/vue-devtools#vue-devtools",target:"_blank",rel:"noopener"}},[t._v("vue-devtools")])]),a("li",[a("a",{attrs:{href:"https://vue-loader.vuejs.org",target:"_blank",rel:"noopener"}},[t._v("vue-loader")])]),a("li",[a("a",{attrs:{href:"https://github.com/vuejs/awesome-vue",target:"_blank",rel:"noopener"}},[t._v("awesome-vue")])])])}],f={name:"HelloWorld",props:{msg:String}},h=f,g=(a("75bb"),Object(u["a"])(h,p,v,!1,null,"d43631e4",null)),_=g.exports,b=function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("div",[t.response||t.error||!t.exists?t._e():a("div",[a("vue-loading",{staticClass:"my-3",attrs:{type:"spin",color:"#007bff",size:{width:"50px",height:"50px"}}})],1),t.response?a("div",[a("div",{staticClass:"px-3 py-2 border-bottom border-2"},[a("div",{staticClass:"row"},[a("div",{staticClass:"h2 col my-auto"},[t._v(" "+t._s(this.response.title)+" "),null!==t.user&&t.user.uid==t.response.owner?a("router-link",{staticClass:"text-dark h5 m-1",attrs:{to:"/edit/"+t.$route.params.id}},[a("b-icon-pencil")],1):t._e()],1),a("div",{staticClass:"col-auto"},[a("div",[a("router-link",{staticClass:"link-dark",attrs:{to:"/user/"+this.response.owner}},[a("b-icon-person-circle"),t._v(" "+t._s(this.response.owner)+" ")],1)],1),a("div",[a("b-icon-clock"),t._v(" "+t._s(this.response.ua_formatted)+" ")],1)])])]),a("swiper",{staticClass:"swiper",attrs:{options:t.swiperOption},on:{ready:t.swiperReady}},[a("div",{staticClass:"swiper-button-prev",attrs:{slot:"button-prev"},slot:"button-prev"}),a("div",{staticClass:"swiper-button-next",attrs:{slot:"button-next"},slot:"button-next"}),t._l(61,(function(e){return a("swiper-slide",{key:e},[a("viewTable",{attrs:{arg:t.getTable(e-11)}})],1)}))],2)],1):t._e(),t.error?a("div",{staticClass:"alert alert-danger",attrs:{role:"alert"}},[t._v(" エラーが発生しました。もう一度お試しください。 ")]):t._e(),t.exists?t._e():a("NotFound")],1)},y=[],w=(a("fb6a"),a("d3b7"),a("25f0"),a("bc3a")),C=a.n(w),x=a("d523"),k=a("7212"),S=function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("div",[a("div",{staticClass:"text-center my-3 h5 fw-normal"},[a("span",{staticClass:"border border-2 border-primary rounded py-1 px-2"},[t._v(" "+t._s(t.arg.dtext)+" ")])]),0!=t.arg.data.length?a("div",{staticClass:"col-6 mx-auto h5"},[a("table",{staticClass:"table table-borderless col-6"},[a("tbody",t._l(t.arg.data,(function(e){return a("tr",{key:e.id},[a("th",[t._v(t._s(e.item_name))]),a("td",{staticClass:"text-center"},[t._v(t._s(e.item))])])})),0)])]):a("div",{staticClass:"text-center my-3 h4"},[t._v(" データがありません ")])])},T=[],D={name:"View-table",props:["arg"]},E=D,$=Object(u["a"])(E,S,T,!1,null,null,null),j=$.exports,O=function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("div",{staticClass:"text-center font-monospace mt-5 py-3"},[a("div",{staticClass:"display-1 fw-bold my-3"},[t._v(" >_< ")]),a("h3",[t._v(" 404:ページが存在しません ")]),a("router-link",{staticClass:"btn btn-outline-primary",attrs:{to:"/"}},[t._v(" ホームに戻る ")])],1)},P=[],I={name:"NotFound"},N=I,A=Object(u["a"])(N,O,P,!1,null,null,null),F=A.exports,K=(a("a7a3"),{name:"View",mounted:function(){var t=this;i["a"].auth().onAuthStateChanged((function(e){null!==e&&(t.user=e)})),C.a.get("https://timedule.herokuapp.com/table/"+this.$route.params.id).then((function(e){t.response=e.data;var a=new Date(t.response.updated_at);t.response.ua_formatted=String(a.getFullYear()).slice(-2)+"/"+String(a.getMonth()+101).slice(-2)+"/"+String(a.getDate()+100).slice(-2),document.title=t.response.title+" - Timedule"})).catch((function(e){404==e.response.status?t.exists=!1:t.error=!0,console.log(e.message)}))},components:{viewTable:j,NotFound:F,VueLoading:x["VueLoading"],Swiper:k["Swiper"],SwiperSlide:k["SwiperSlide"]},methods:{getTable:function(t){var e=new Date(this.today.toString());e.setDate(e.getDate()+t);for(var a=String(e.getFullYear()).slice(-2)+"/"+String(e.getMonth()+101).slice(-2)+"/"+String(e.getDate()+100).slice(-2),r=this.response.main_data[a],s=0;s<r.length;s++){if(""!=r[r.length-1].item_name||""!=r[r.length-1].item)break;r.pop()}var n=["日","月","火","水","木","金","土"],i=a+" ("+n[e.getDay()]+")";return{dtext:i,data:r}},swiperReady:function(t){t.slideTo(10,0)}},data:function(){return{user:null,response:null,exists:!0,error:!1,today:new Date,swiperOption:{navigation:{nextEl:".swiper-button-next",prevEl:".swiper-button-prev"}}}}}),V=K,L=Object(u["a"])(V,b,y,!1,null,null,null),M=L.exports,U=function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("div",[t.loaded?a("div",[null!==t.user&&t.user.emailVerified?a("div",[t.response||t.error?t._e():a("div",[a("vue-loading",{staticClass:"my-3",attrs:{type:"spin",color:"#007bff",size:{width:"50px",height:"50px"}}})],1),t.response?a("div",[t.notfound?a("NotFound"):a("div",[t.owner&&t.owner!=t.user.uid?a("div",{staticClass:"h5 text-center m-3"},[t._v(" 権限がありません ")]):a("div",[a("div",{staticClass:"px-3 pt-2 border-bottom border-2"},[a("div",{staticClass:"row"},[a("div",{staticClass:"form-group col-6 my-auto"},[a("input",{directives:[{name:"model",rawName:"v-model",value:t.title,expression:"title"}],staticClass:"form-control h2",attrs:{placeholder:"タイトルを入力"},domProps:{value:t.title},on:{input:function(e){e.target.composing||(t.title=e.target.value)}}})]),a("div",{staticClass:"col"}),t.saving?a("div",{staticClass:"h1 col-auto mt-1 mx-2"},[a("b-icon-hourglass-split",{attrs:{variant:"secondary"}})],1):a("div",{staticClass:"h1 col-auto mt-1 mx-2",staticStyle:{cursor:"pointer"},on:{click:function(e){return t.saveData()}}},[a("b-icon-cloud-arrow-up")],1)])]),a("b-tabs",{attrs:{"nav-class":"px-3 mt-2",justified:"",lazy:""}},[a("b-tab",{attrs:{title:"メイン"}},t._l(61,(function(e){return a("div",{key:e,staticClass:"card m-3 border-2 border-secondary col-md-6 mx-md-auto"},[a("div",{staticClass:"card-title text-center h5 my-2"},[t._v(" "+t._s(t.getDateStrWithDay(e-11))+" ")]),a("div",{staticClass:"form-group m-3 px-1"},[a("b-form-select",{staticClass:"form-select",on:{change:function(a){t.tmplSelected(t.getDateStr(e-11))}},model:{value:t.selectedTmpl[t.getDateStr(e-11)],callback:function(a){t.$set(t.selectedTmpl,t.getDateStr(e-11),a)},expression:"selectedTmpl[getDateStr(i - 11)]"}},[a("b-form-select-option",{attrs:{value:void 0}},[t._v("テンプレートから入力")]),t._l(t.template,(function(e){return a("b-form-select-option",{key:e.id,attrs:{value:e.id}},[t._v(t._s(e.name))])}))],2)],1),t._l(t.main_data[t.getDateStr(e-11)],(function(e){return a("div",{key:e.id,staticClass:"row mx-3 my-2"},[a("div",{key:"1-"+t.fakeKey,staticClass:"form-group col-6 px-1"},[a("input",{directives:[{name:"model",rawName:"v-model",value:e.item_name,expression:"item.item_name"}],staticClass:"form-control",domProps:{value:e.item_name},on:{input:function(a){a.target.composing||t.$set(e,"item_name",a.target.value)}}})]),a("div",{key:"2-"+t.fakeKey,staticClass:"form-group col-6 px-1"},[a("input",{directives:[{name:"model",rawName:"v-model",value:e.item,expression:"item.item"}],staticClass:"form-control",domProps:{value:e.item},on:{input:function(a){a.target.composing||t.$set(e,"item",a.target.value)}}})])])}))],2)})),0),a("b-tab",{attrs:{title:"テンプレート"}},[t._l(t.template,(function(e){return a("div",{key:e.id,staticClass:"card m-3 border-2 border-secondary col-md-6 mx-md-auto",staticStyle:{position:"relative"}},[a("div",{staticClass:"card-title text-center my-2"},[a("div",{staticClass:"form-group col-6 mx-auto text-center"},[a("input",{directives:[{name:"model",rawName:"v-model",value:e.name,expression:"tmpl.name"}],staticClass:"form-control text-center",domProps:{value:e.name},on:{input:function(a){a.target.composing||t.$set(e,"name",a.target.value)}}})])]),a("div",{staticClass:"mx-3 my-3 h3",staticStyle:{position:"absolute",top:"0",right:"0",cursor:"pointer"},on:{click:function(a){return t.delTmpl(e.id)}}},[a("b-icon-trash")],1),t._l(e.items,(function(e){return a("div",{key:e.id,staticClass:"row mx-3 my-2"},[a("div",{staticClass:"form-group col-6 px-1"},[a("input",{directives:[{name:"model",rawName:"v-model",value:e.item_name,expression:"item.item_name"}],staticClass:"form-control",domProps:{value:e.item_name},on:{input:function(a){a.target.composing||t.$set(e,"item_name",a.target.value)}}})]),a("div",{staticClass:"form-group col-6 px-1"},[a("input",{directives:[{name:"model",rawName:"v-model",value:e.item,expression:"item.item"}],staticClass:"form-control",domProps:{value:e.item},on:{input:function(a){a.target.composing||t.$set(e,"item",a.target.value)}}})])])}))],2)})),a("div",{staticClass:"row m-3 mx-md-0"},[a("div",{staticClass:"border border-success rounded-1 text-success text-center col-md-6 mx-md-auto py-2",staticStyle:{cursor:"pointer"},on:{click:function(e){return t.appendTmpl()}}},[t._v("+ 追加")])])],2)],1)],1)])],1):t._e(),t.error?a("div",{staticClass:"alert alert-danger",attrs:{role:"alert"}},[t._v(" エラーが発生しました。もう一度お試しください。 ")]):t._e()]):a("div",{staticClass:"h5 text-center m-3"},[t._v(" ログインしていません ")])]):a("div",[a("vue-loading",{staticClass:"my-3",attrs:{type:"spin",color:"#007bff",size:{width:"50px",height:"50px"}}})],1)])},z=[],W=(a("4de4"),a("a434"),a("159b"),{name:"Edit",mounted:function(){var t=this;i["a"].auth().onAuthStateChanged((function(e){t.loaded=!0,t.user=e})),C.a.get("https://timedule.herokuapp.com/table/"+this.$route.params.id).then((function(e){t.owner=e.data.owner,t.title=e.data.title;for(var a=-10;a<=50;a++){var r={},s=t.getDateStr(a);r[s]=e.data.main_data[s],void 0==r[s]&&(r[s]=[]);for(var n=[],i=0;i<10;i++)r[s][i]?n[i]=r[s][i]:n[i]={id:String(i+1),item_name:"",item:""};Object.assign(r[s],n),Object.assign(t.main_data,r),Object.assign(t.main_data_org,r)}t.template=e.data.template,t.response=!0,document.title=t.title+"を編集中 - Timedule"})).catch((function(e){404==e.response.status?(t.response=!0,t.notfound=!0):t.error=!0,console.log(e.message)}))},components:{NotFound:F,VueLoading:x["VueLoading"]},methods:{getDateStr:function(t){var e=new Date(this.today.toString());e.setDate(e.getDate()+t);var a=String(e.getFullYear()).slice(-2)+"/"+String(e.getMonth()+101).slice(-2)+"/"+String(e.getDate()+100).slice(-2);return a},getDateStrWithDay:function(t){var e=new Date(this.today.toString());e.setDate(e.getDate()+t);var a=String(e.getFullYear()).slice(-2)+"/"+String(e.getMonth()+101).slice(-2)+"/"+String(e.getDate()+100).slice(-2),r=["日","月","火","水","木","金","土"],s=a+" ("+r[e.getDay()]+")";return s},appendTmpl:function(){var t={id:String(this.template.length+1),name:"新しいテンプレート",items:[{id:"1",item_name:"",item:""},{id:"2",item_name:"",item:""},{id:"3",item_name:"",item:""},{id:"4",item_name:"",item:""},{id:"5",item_name:"",item:""},{id:"6",item_name:"",item:""},{id:"7",item_name:"",item:""},{id:"8",item_name:"",item:""},{id:"9",item_name:"",item:""},{id:"10",item_name:"",item:""}]};this.template.push(t)},delTmpl:function(t){this.template=this.template.filter((function(e){return e.id!=t}));for(var e=1;e<=this.template.length;e++)this.template[e-1].id=String(e);this.template.splice()},tmplSelected:function(t){var e=this,a=this.selectedTmpl[t];void 0==a?this.main_data[t]=this.main_data_org[t]:this.template.forEach((function(r){r.id==a&&(e.main_data[t]=r.items)})),this.fakeKey++},saveData:function(){var t=this;this.saving=!0,this.user.getIdToken(!0).then((function(e){C.a.post("https://timedule.herokuapp.com/table/"+t.$route.params.id,{owner:e,title:t.title,main_data:t.main_data,template:t.template}).then((function(){t.saving=!1})).catch((function(){alert("エラーが発生しました"),t.saving=!1}))})).catch((function(){alert("エラーが発生しました"),t.saving=!1}))}},data:function(){return{user:null,loaded:!1,response:!1,notfound:!1,today:new Date,owner:"",title:"",main_data:{},main_data_org:{},template:[],selectedTmpl:{},fakeKey:0,saving:!1,error:!1}}}),Y=W,B=Object(u["a"])(Y,U,z,!1,null,null,null),R=B.exports,q=function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("div",[t.response||t.error||!t.exists?t._e():a("div",[a("vue-loading",{staticClass:"my-3",attrs:{type:"spin",color:"#007bff",size:{width:"50px",height:"50px"}}})],1),t.response?a("div",[a("div",{staticClass:"p-3 border-bottom border-2"},[a("div",{staticClass:"row"},[a("div",{staticClass:"h2 col my-auto"},[t._v(" "+t._s(this.$route.params.user_id)+"さんの時間割 ")]),null!==t.user&&t.user.uid==t.$route.params.user_id?a("div",{staticClass:"col-auto my-auto h4"},[a("router-link",{staticClass:"link-dark",attrs:{to:"/user/"+t.user.uid+"/settings"}},[a("b-icon-gear")],1)],1):t._e()])]),null!==t.user&&0==t.user.emailVerified?a("div",{staticClass:"alert alert-warning m-3",attrs:{role:"alert"}},[t._v(" ユーザーの登録が完了していません。受信したメールからメールアドレスの確認を行ってください。 "),a("div",{staticClass:"row"},[a("div",{staticClass:"col"}),a("div",{staticClass:"btn btn-outline-dark col-auto mx-2 mt-2",on:{click:function(e){return t.resendEmail()}}},[t._v(" 確認メールを再送信 ")])])]):t._e(),a("div",{staticClass:"row m-3 mx-md-0"},[null!==t.user&&t.user.uid==t.$route.params.user_id?a("div",{staticClass:"border border-success rounded-1 text-success text-center col-md-6 mx-md-auto py-2",staticStyle:{cursor:"pointer"},on:{click:function(e){return t.appendTable()}}},[t._v("+ 追加")]):t._e()]),0==t.response.length?a("div",{staticClass:"text-center m-3"},[a("h5",[t._v("時間割がありません")])]):t._l(t.response,(function(e){return a("div",{key:e.id,staticClass:"card m-3 col-md-6 mx-md-auto"},[a("div",{staticClass:"card-body"},[a("h5",{staticClass:"card-title"},[t._v(" "+t._s(e.title)+" ")]),a("div",{staticClass:"row"},[a("p",{staticClass:"card-text col"},[a("b-icon-clock"),t._v(" "+t._s(t.formatDate(e.updated_at))+" ")],1),a("div",{staticClass:"col-auto"},[a("router-link",{staticClass:"btn btn-outline-primary",attrs:{to:"/view/"+e.id}},[t._v(" 開く ")])],1),null!==t.user&&t.user.uid==t.$route.params.user_id?a("div",{staticClass:"col-auto"},[a("router-link",{staticClass:"btn btn-outline-secondary",attrs:{to:"/edit/"+e.id}},[t._v(" 編集 ")])],1):t._e(),null!==t.user&&t.user.uid==t.$route.params.user_id?a("div",{staticClass:"col-auto"},[a("div",{staticClass:"btn btn-outline-danger",on:{click:function(a){return t.delTable(e.id)}}},[t._v(" 削除 ")])]):t._e()])])])}))],2):t._e(),t.error?a("div",{staticClass:"alert alert-danger",attrs:{role:"alert"}},[t._v(" エラーが発生しました。もう一度お試しください。 ")]):t._e(),t.exists?t._e():a("NotFound")],1)},G=[],H=(a("4e82"),a("a15b"),a("d81d"),a("a630"),a("3ca3"),{name:"User",mounted:function(){var t=this;i["a"].auth().onAuthStateChanged((function(e){null!==e&&(t.user=e)})),C.a.get("https://timedule.herokuapp.com/user/"+this.$route.params.user_id).then((function(e){t.response=e.data.sort((function(t,e){return new Date(e.updated_at).getTime()-new Date(t.updated_at).getTime()})),document.title=t.$route.params.user_id+"さんの時間割 - Timedule"})).catch((function(e){404==e.response.status?t.exists=!1:t.error=!0,console.log(e.message)}))},components:{NotFound:F,VueLoading:x["VueLoading"]},methods:{formatDate:function(t){var e=new Date(t);return String(e.getFullYear()).slice(-2)+"/"+String(e.getMonth()+101).slice(-2)+"/"+String(e.getDate()+100).slice(-2)},resendEmail:function(){this.user.sendEmailVerification().then((function(){window.alert("確認メールを送信しました")}))},appendTable:function(){var t=this,e="abcdefghijklmnopqrstuvwxyzABCDEFGHIJKLMNOPQRSTUVWXYZ0123456789",a=Array.from(Array(8)).map((function(){return e[Math.floor(Math.random()*e.length)]})).join("");C.a.get("https://timedule.herokuapp.com/table/"+a).then((function(){t.appendTable()})).catch((function(e){404==e.response.status?t.user.getIdToken(!0).then((function(e){C.a.post("https://timedule.herokuapp.com/table/"+a,{owner:e,title:"新しい時間割",main_data:{},template:[]}).then((function(){t.response.unshift({id:a,title:"新しい時間割",updated_at:(new Date).toString()})})).catch((function(){alert("エラーが発生しました")}))})).catch((function(){alert("エラーが発生しました")})):t.appendTable()}))},delTable:function(t){var e=this;confirm("本当に削除しますか？")&&this.user.getIdToken(!0).then((function(a){C.a.post("https://timedule.herokuapp.com/deltable/"+t,{user_id:a}).then((function(){e.response=e.response.filter((function(e){return e.id!=t})),e.response.splice()})).catch((function(){alert("エラーが発生しました")}))})).catch((function(){alert("エラーが発生しました")}))}},data:function(){return{user:null,response:null,exists:!0,error:!1}}}),J=H,Q=Object(u["a"])(J,q,G,!1,null,null,null),X=Q.exports,Z=function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("div",[null===t.user?a("div",[a("vue-loading",{staticClass:"my-3",attrs:{type:"spin",color:"#007bff",size:{width:"50px",height:"50px"}}})],1):a("div",[t._m(0),a("div",[a("div",{staticClass:"d-grid col-12 p-3 col-md-4 mx-auto"},[a("div",{staticClass:"btn btn-outline-primary",on:{click:function(e){return t.logOut()}}},[t._v(" ログアウト ")])]),a("transition",[t.errcode?a("div",{staticClass:"alert alert-danger m-3",attrs:{role:"alert"}},[t._v(" エラーが発生しました。エラーコード: "+t._s(this.errcode)+" ")]):t._e()])],1)])])},tt=[function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("div",{staticClass:"p-3 border-bottom border-2"},[a("span",{staticClass:"h2"},[t._v(" ユーザー設定 ")])])}],et=(a("ac1f"),a("5319"),{name:"User-settings",mounted:function(){var t=this;i["a"].auth().onAuthStateChanged((function(e){null===e||e.uid!=t.$route.params.user_id?t.$router.replace("/user/"+t.$route.params.user_id):t.user=e}))},methods:{logOut:function(){var t=this;i["a"].auth().signOut().then((function(){t.$router.replace("/user/"+t.$route.params.user_id)})).catch((function(e){t.errcode=e.code,t.formKey+=1,setTimeout((function(){t.errcode=""}),2e3)}))}},data:function(){return{user:null,errcode:""}},components:{VueLoading:x["VueLoading"]}}),at=et,rt=(a("be94"),Object(u["a"])(at,Z,tt,!1,null,null,null)),st=rt.exports,nt=function(){var t=this,e=t.$createElement,r=t._self._c||e;return r("div",[t._m(0),r("div",{staticClass:"text-center"},[r("div",{key:t.formKey},[r("img",{staticClass:"my-3",attrs:{src:a("07a6"),height:"150"}}),r("div",{staticClass:"form-group m-3 col-md-4 mx-md-auto"},[r("label",{attrs:{for:"email"}},[t._v("メールアドレス")]),r("input",{directives:[{name:"model",rawName:"v-model",value:t.username,expression:"username"}],staticClass:"form-control",attrs:{type:"email",id:"email",placeholder:"メールアドレス"},domProps:{value:t.username},on:{keydown:function(e){return!e.type.indexOf("key")&&t._k(e.keyCode,"enter",13,e.key,"Enter")?null:t.focusPw()},input:function(e){e.target.composing||(t.username=e.target.value)}}})]),r("div",{staticClass:"form-group m-3 col-md-4 mx-md-auto"},[r("label",{attrs:{for:"password"}},[t._v("パスワード")]),r("input",{directives:[{name:"model",rawName:"v-model",value:t.password,expression:"password"}],staticClass:"form-control",attrs:{type:"password",id:"password",placeholder:"パスワード"},domProps:{value:t.password},on:{keydown:function(e){return!e.type.indexOf("key")&&t._k(e.keyCode,"enter",13,e.key,"Enter")?null:t.logIn()},input:function(e){e.target.composing||(t.password=e.target.value)}}})])]),r("div",{staticClass:"btn btn-outline-primary",on:{click:function(e){return t.logIn()}}},[t._v("ログイン")]),r("div",{staticClass:"m-3"},[r("small",[t._v(" まだ登録してませんか？ ➔ "),r("router-link",{attrs:{to:"/signup"}},[t._v("登録")])],1)]),r("transition",[t.errcode?r("div",{staticClass:"alert alert-danger m-3",attrs:{role:"alert"}},[t._v(" ログインに失敗しました。エラーコード: "+t._s(this.errcode)+" ")]):t._e()])],1)])},it=[function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("div",{staticClass:"p-3 border-bottom border-2"},[a("span",{staticClass:"h2"},[t._v(" Timeduleにログイン ")])])}],ot={name:"Login",data:function(){return{formKey:0,username:"",password:"",errcode:""}},mounted:function(){var t=this;i["a"].auth().onAuthStateChanged((function(e){null!==e&&t.$router.replace("/user/"+t.user.uid)}))},methods:{focusPw:function(){document.getElementById("password").focus()},logIn:function(){var t=this;i["a"].auth().signInWithEmailAndPassword(this.username,this.password).then((function(e){var a=e.user;t.$router.replace("/user/"+a.uid)})).catch((function(e){t.errcode=e.code,t.formKey+=1,setTimeout((function(){t.errcode=""}),2e3)}))}}},lt=ot,ut=(a("039a"),Object(u["a"])(lt,nt,it,!1,null,null,null)),ct=ut.exports,dt=function(){var t=this,e=t.$createElement,r=t._self._c||e;return r("div",[t._m(0),r("div",{staticClass:"text-center"},[r("div",{key:t.formKey},[r("img",{staticClass:"my-3",attrs:{src:a("5d0a"),height:"150"}}),r("div",{staticClass:"form-group m-3 col-md-4 mx-md-auto"},[r("label",{attrs:{for:"uid"}},[t._v("ユーザーID")]),r("input",{directives:[{name:"model",rawName:"v-model",value:t.uid,expression:"uid"}],staticClass:"form-control",attrs:{id:"uid",placeholder:"ユーザーID"},domProps:{value:t.uid},on:{keydown:function(e){return!e.type.indexOf("key")&&t._k(e.keyCode,"enter",13,e.key,"Enter")?null:t.focusEm()},input:function(e){e.target.composing||(t.uid=e.target.value)}}})]),r("div",{staticClass:"form-group m-3 col-md-4 mx-md-auto"},[r("label",{attrs:{for:"email"}},[t._v("メールアドレス")]),r("input",{directives:[{name:"model",rawName:"v-model",value:t.email,expression:"email"}],staticClass:"form-control",attrs:{type:"email",id:"email",placeholder:"メールアドレス"},domProps:{value:t.email},on:{keydown:function(e){return!e.type.indexOf("key")&&t._k(e.keyCode,"enter",13,e.key,"Enter")?null:t.focusPw()},input:function(e){e.target.composing||(t.email=e.target.value)}}})]),r("div",{staticClass:"form-group m-3 col-md-4 mx-md-auto"},[r("label",{attrs:{for:"password"}},[t._v("パスワード")]),r("input",{directives:[{name:"model",rawName:"v-model",value:t.password,expression:"password"}],staticClass:"form-control",attrs:{type:"password",id:"password",placeholder:"パスワード"},domProps:{value:t.password},on:{keydown:function(e){return!e.type.indexOf("key")&&t._k(e.keyCode,"enter",13,e.key,"Enter")?null:t.signUp()},input:function(e){e.target.composing||(t.password=e.target.value)}}})])]),r("div",{staticClass:"btn btn-outline-primary",on:{click:function(e){return t.signUp()}}},[t._v("登録")]),r("div",{staticClass:"m-3"},[r("small",[t._v(" 登録済みの方 ➔ "),r("router-link",{attrs:{to:"/login"}},[t._v("ログイン")])],1)]),r("transition",[t.errmsg?r("div",{staticClass:"alert alert-danger m-3",attrs:{role:"alert"}},[t._v(" "+t._s(this.errmsg)+" ")]):t._e()])],1)])},mt=[function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("div",{staticClass:"p-3 border-bottom border-2"},[a("span",{staticClass:"h2"},[t._v(" ユーザー登録 ")])])}],pt={name:"Signup",data:function(){return{formKey:0,uid:"",email:"",password:"",errmsg:""}},mounted:function(){var t=this;i["a"].auth().onAuthStateChanged((function(e){null!==e&&t.$router.replace("/user/"+t.user.uid)}))},methods:{focusEm:function(){document.getElementById("email").focus()},focusPw:function(){document.getElementById("password").focus()},signUp:function(){var t=this;C.a.post("https://timedule.herokuapp.com/create_user",{uid:this.uid,email:this.email,password:this.password}).then((function(e){e.data.res?"UidAlreadyExists"==e.data.res?(t.errmsg="ユーザーIDが存在します",t.formKey+=1):"EmailAlreadyExists"==e.data.res?(t.errmsg="メールアドレスが存在します",t.formKey+=1):"InvalidEmail"==e.data.res?(t.errmsg="メールアドレスが正しくありません",t.formKey+=1):"WeakPassword"==e.data.res?(t.errmsg="パスワードは6文字以上にしてください",t.formKey+=1):(t.errmsg=e.data.res,t.formKey+=1):i["a"].auth().signInWithEmailAndPassword(t.email,t.password).then((function(e){var a=e.user;a.sendEmailVerification().then((function(){t.$router.replace("/user/"+a.uid)}))})).catch((function(e){t.errmsg=e.code,t.formKey+=1,setTimeout((function(){t.errcode=""}),2e3)}))})).catch((function(e){t.errmsg="予期せぬエラーが発生しました",t.formKey+=1,console.log(e.message),alert(e.message)}))}}},vt=pt,ft=(a("8d1b"),Object(u["a"])(vt,dt,mt,!1,null,null,null)),ht=ft.exports;r["default"].use(m["a"]);var gt=[{path:"/",name:"Top",component:_,meta:{title:"Timedule - 時間割管理ツール",desc:""}},{path:"/view/:id",name:"View",component:M,meta:{title:"時間割ビューアー - Timedule",desc:""}},{path:"/edit/:id",name:"Edit",component:R,meta:{title:"時間割を編集 - Timedule",desc:""}},{path:"/user/:user_id",name:"User",component:X,meta:{title:"ユーザー情報 - Timedule",desc:""}},{path:"/user/:user_id/settings",name:"User-settings",component:st,meta:{title:"ユーザー設定 - Timedule",desc:""}},{path:"/login",name:"Login",component:ct,meta:{title:"ログイン - Timedule",desc:""}},{path:"/signup",name:"Signup",component:ht,meta:{title:"ユーザー登録 - Timedule",desc:""}},{path:"*",name:"NotFound",component:F,meta:{title:"404 NotFound - Timedule",desc:""}}],_t=new m["a"]({mode:"history",base:"/",routes:gt}),bt=_t,yt=a("5f5b"),wt=a("b1e0"),Ct=(a("f9e3"),a("2dd8"),a("9483"));Object(Ct["a"])("".concat("/","service-worker.js"),{ready:function(){console.log("App is being served from cache by a service worker.\nFor more details, visit https://goo.gl/AFskqB")},registered:function(){console.log("Service worker has been registered.")},cached:function(){console.log("Content has been cached for offline use.")},updatefound:function(){console.log("New content is downloading.")},updated:function(){console.log("New content is available; please refresh.")},offline:function(){console.log("No internet connection found. App is running in offline mode.")},error:function(t){console.error("Error during service worker registration:",t)}}),r["default"].use(yt["a"]),r["default"].use(wt["a"]),r["default"].config.productionTip=!1;var xt={apiKey:"AIzaSyDWriPwM7dGyf4FuVWagT9RIVR6UP8rLWk",authDomain:"timedule.firebaseapp.com",projectId:"timedule",storageBucket:"timedule.appspot.com",messagingSenderId:"632812129342",appId:"1:632812129342:web:0f31cfac8a5d368e4b556f",measurementId:"G-GQR05SFYPP"};i["a"].initializeApp(xt),new r["default"]({router:bt,render:function(t){return t(d)}}).$mount("#app")},"5d0a":function(t,e,a){t.exports=a.p+"img/signup.fbaef3fd.png"},7174:function(t,e,a){},"75bb":function(t,e,a){"use strict";a("8118")},8118:function(t,e,a){},"8d1b":function(t,e,a){"use strict";a("2dad")},be94:function(t,e,a){"use strict";a("1439")},cf05:function(t,e,a){t.exports=a.p+"img/logo.fe41fec0.png"}});
//# sourceMappingURL=app.209f305c.js.map